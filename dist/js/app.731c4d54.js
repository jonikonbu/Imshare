(function(t){function a(a){for(var s,n,l=a[0],r=a[1],c=a[2],m=0,u=[];m<l.length;m++)n=l[m],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(a);while(u.length)u.shift()();return i.push.apply(i,c||[]),e()}function e(){for(var t,a=0;a<i.length;a++){for(var e=i[a],s=!0,l=1;l<e.length;l++){var r=e[l];0!==o[r]&&(s=!1)}s&&(i.splice(a--,1),t=n(n.s=e[0]))}return t}var s={},o={app:0},i=[];function n(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=s,n.d=function(t,a,e){n.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,a){if(1&a&&(t=n(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)n.d(e,s,function(a){return t[a]}.bind(null,s));return e},n.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(a,"a",a),a},n.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=a,l=l.slice();for(var c=0;c<l.length;c++)a(l[c]);var d=r;i.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"02bd":function(t,a,e){"use strict";e("52e1")},"1aa8":function(t,a,e){"use strict";e("4438")},"271b":function(t,a,e){},"27cb":function(t,a,e){},4438:function(t,a,e){},4761:function(t,a,e){},"52e1":function(t,a,e){},"551c":function(t,a,e){},5583:function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);var s=e("2b0e"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",[e("v-main",[e("div",{attrs:{id:"app"}},[e("Navbar")],1)])],1)},i=[],n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("v-app-bar",{attrs:{flat:"","Inverted-Scroll":""}},[s("v-app-bar-nav-icon",{staticClass:"hidden-md-and-up app-bar",on:{click:function(a){t.drawer=!0}}}),s("v-container",{staticClass:"mx-auto py-0"},[s("v-row",{attrs:{align:"center"}},[s("v-col",[s("v-img",{staticClass:"mr-5",attrs:{src:e("b640"),contain:"",height:"48",width:"48","max-width":"48"}})],1),s("v-btn",{staticClass:"hidden-sm-and-down nav-btn",attrs:{depressed:""}},[s("router-link",{staticClass:"nav-btn-link",attrs:{to:"/"}},[t._v(" HOME ")])],1),s("v-btn",{staticClass:"hidden-sm-and-down nav-btn",attrs:{depressed:""}},[s("router-link",{staticClass:"nav-btn-link",attrs:{to:"/post"}},[t._v(" POST ")])],1),s("v-btn",{staticClass:"hidden-sm-and-down nav-btn",attrs:{depressed:""}},[s("router-link",{staticClass:"nav-btn-link",attrs:{to:"/mypage"}},[t._v(" MYPAGE ")])],1),s("v-menu",{scopedSlots:t._u([{key:"activator",fn:function(a){var e=a.on,o=a.attrs;return[s("v-btn",t._g(t._b({staticClass:"hidden-sm-and-down nav-btn-user",attrs:{depressed:""}},"v-btn",o,!1),e),[s("span",[t._v(" USER ")])])]}}])},[s("v-list",[s("v-list-item",[s("v-btn",{staticClass:"login user-menu-btn",attrs:{color:"#1E90FF",depressed:""},on:{click:function(a){t.loginModal=!0}}},[s("span",[t._v(" ログイン ")])])],1),t.login?s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"logout user-menu-btn",attrs:{color:"#1E90FF",depressed:""},on:{click:t.userLogOut}},[s("span",[t._v(" ログアウト ")])])],1)],1):s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"signin user-menu-btn",attrs:{depressed:"",color:"#1E90FF"},on:{click:function(a){t.signinModal=!0}}},[s("span",[t._v(" 新規登録 ")])])],1)],1)],1)],1)],1)],1)],1),s("v-container",[s("br"),s("div",{staticClass:"navbar-text-area"},[t.login?s("div",{staticClass:"navbar-text animate__animated animate__bounce"},[s("p",{staticClass:"navbar-text-item"},[t._v("ようこそ "+t._s(this.$store.state.user.name)+" さん")])]):s("div",{staticClass:"navbar-text animate__animated animate__bounce"},[s("p",{staticClass:"navbar-text-item-else"},[t._v("※USERボタンからログイン又は新規登録ができます。 ")])])]),s("router-view",{staticClass:"view animate__animated animate__slideInLeft"})],1),s("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(a){t.drawer=a},expression:"drawer"}},[s("v-list",{attrs:{nav:"",dense:""}},[s("v-list-item-group",[s("v-list-item",[s("v-list-item-icon",[s("v-icon",{attrs:{color:"#000080"}},[t._v("mdi-home")])],1),s("v-list-item-title",[s("router-link",{staticClass:"drawer-link",attrs:{to:"/"}},[s("span",[t._v(" HOME ")])])],1)],1),s("v-list-item",[s("v-list-item-icon",[s("v-icon",{attrs:{color:"#000080"}},[t._v("mdi-image")])],1),s("v-list-item-title",[s("router-link",{staticClass:"drawer-link",attrs:{to:"/post"}},[s("span",[t._v(" POST ")])])],1)],1),s("v-list-item",[s("v-list-item-icon",[s("v-icon",{attrs:{color:"#000080"}},[t._v("mdi-account")])],1),s("v-list-item-title",[s("router-link",{staticClass:"drawer-link",attrs:{to:"/mypage"}},[s("span",[t._v(" MYPAGE ")])])],1)],1),s("v-list-group",{attrs:{"no-action":"","sub-group":"",value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[s("v-list-item-content",[s("v-list-item-title",{staticClass:"drawer-btn-user"},[s("span",[t._v(" USER ")])])],1)]},proxy:!0}])},[s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"login drawer-btn-user-item",attrs:{depressed:"",color:"#1E90FF"},on:{click:function(a){t.loginModal=!0}}},[s("span",[t._v(" ログイン ")])])],1)],1),t.login?s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"logout drawer-btn-user-item",attrs:{depressed:"",color:"#1E90FF"},on:{click:t.userLogOut}},[s("span",[t._v(" ログアウト ")])])],1)],1):s("v-list-item",[s("v-list-item-title",[s("v-btn",{staticClass:"signin drawer-btn-user-item",attrs:{depressed:"",color:"#1E90FF"},on:{click:function(a){t.signinModal=!0}}},[s("span",[t._v(" 新規登録 ")])])],1)],1)],1)],1)],1)],1),s("div",[s("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.signinModal,callback:function(a){t.signinModal=a},expression:"signinModal"}},[s("SigninDialog",{on:{signinClose:function(a){t.signinModal=!1}}})],1)],1),s("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.loginModal,callback:function(a){t.loginModal=a},expression:"loginModal"}},[s("LoginDialog",{on:{loginClose:function(a){t.loginModal=!1}}})],1)],1)},l=[],r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",[e("v-card-title",[t._v("新規登録")]),e("v-card-text",[e("v-text-field",{attrs:{label:"Name*",required:""},model:{value:t.signInName,callback:function(a){t.signInName=a},expression:"signInName"}}),e("v-text-field",{attrs:{label:"Email*",required:""},model:{value:t.signInEmail,callback:function(a){t.signInEmail=a},expression:"signInEmail"}}),e("v-text-field",{attrs:{label:"PassWord*",type:"password",required:""},model:{value:t.signInPassword,callback:function(a){t.signInPassword=a},expression:"signInPassword"}})],1),e("v-divider"),e("v-card-actions",[e("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("閉じる")]),e("v-btn",{attrs:{color:"primary"},on:{click:t.userSignIn}},[t._v("確定")])],1)],1)},c=[],d=e("2f62"),m=e("8aa5"),u=e.n(m);e("ea7b"),e("588e"),e("e71f");const v={apiKey:"AIzaSyB4MqJ7aXVwlM8Lh6OAmLSWloOp7Gef48k",authDomain:"original-image-273c8.firebaseapp.com",databaseURL:"https://original-image-273c8.firebaseio.com",projectId:"original-image-273c8",storageBucket:"original-image-273c8.appspot.com",messagingSenderId:"1012864973815",appId:"1:1012864973815:web:f325934fce0435ab1c0cf2",measurementId:"G-YKRL8N3L3L"};var p={init(){u.a.auth().setPersistence(u.a.auth.Auth.Persistence.LOCAL)}};u.a.getCurrentUser=()=>new Promise((t,a)=>{const e=u.a.auth().onAuthStateChanged(a=>{e(),t(a)},a)}),u.a.initializeApp(v);const h=u.a,g=u.a.firestore(),b=u.a.auth(),k=u.a.storage().ref();s["default"].use(d["a"]);var f=new d["a"].Store({strict:!0,state:{userUid:{uid:""},user:{name:"",email:"",myphoto:""},login:!1},getters:{uid:t=>t.userUid.uid,user:t=>t.user},actions:{autoLogin({commit:t}){b.onAuthStateChanged(a=>{if(a){t("setUid",{uid:a.uid}),t("switchLogin");const e=g.collection("users").doc(a.uid);e.get().then(a=>{if(a.exists){const e=a.data();return t("setUser",{name:e.name,email:e.email,myphoto:e.myphoto})}})}})},login({commit:t},a){b.signInWithEmailAndPassword(a.email,a.password).then(a=>{console.log(a),b.onAuthStateChanged(a=>{if(a){t("setUid",{uid:a.uid}),t("switchLogin");const e=g.collection("users").doc(a.uid);e.get().then(a=>{if(a.exists){const e=a.data();return t("setUser",{name:e.name,email:e.email,myphoto:e.myphoto})}})}})}).catch(()=>{alert("Eメール又はパスワードが間違っています")})},logOut(){this.commit("logOutSwitch")}},mutations:{setUid(t,a){t.userUid.uid=a.uid},switchLogin(t){t.login=!0},logOutSwitch(t){t.login=!1},setUser(t,a){t.user.name=a.name,t.user.email=a.email,t.user.myphoto=a.myphoto},setMyphoto(t,a){console.log(a),t.user.myphoto=a}},modules:{}});const C=(t,a,e)=>{b.createUserWithEmailAndPassword(t,a).then(()=>{const a=b.currentUser.uid,s={name:e,email:t},o=g.collection("users").doc(a);o.set(s)}).catch(t=>{alert("エラー！",t.message),console.error("アカウント再登録エラー",t.message)})},w=(t,a)=>{f.dispatch("login",{email:t,password:a}).then(()=>{alert("ログインしました。")}).catch(()=>{alert("Eメール又はパスワードが間違っています")})},_=()=>{b.signOut().then(()=>{alert("ログアウトしました"),f.dispatch("logOut")})};var x={data(){return{signInName:"",signInEmail:"",signInPassword:""}},methods:{userSignIn(){C(this.signInEmail,this.signInPassword,this.signInName),alert("登録が完了しました。"),this.$emit("signinClose"),this.$router.push("/")},close(){this.$emit("signinClose")}}},y=x,V=e("2877"),I=e("6544"),P=e.n(I),E=e("8336"),M=e("b0af"),D=e("99d9"),S=e("ce7e"),F=e("8654"),U=Object(V["a"])(y,r,c,!1,null,null,null),L=U.exports;P()(U,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VDivider:S["a"],VTextField:F["a"]});var $=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",[e("v-card-title",[t._v("ログイン")]),e("v-card-text",[e("v-text-field",{attrs:{label:"Email*",required:""},model:{value:t.loginEmail,callback:function(a){t.loginEmail=a},expression:"loginEmail"}}),e("v-text-field",{attrs:{label:"PassWord*",type:"password",required:""},model:{value:t.loginPassword,callback:function(a){t.loginPassword=a},expression:"loginPassword"}})],1),e("v-divider"),e("v-card-actions",[e("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("閉じる")]),e("v-btn",{attrs:{color:"primary"},on:{click:t.userLogIn}},[t._v("ログイン")])],1)],1)},T=[],N={data(){return{loginEmail:"",loginPassword:""}},methods:{userLogIn(){w(this.loginEmail,this.loginPassword),this.$emit("loginClose")},close(){this.$emit("loginClose")}}},O=N,B=Object(V["a"])(O,$,T,!1,null,null,null),A=B.exports;P()(B,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VDivider:S["a"],VTextField:F["a"]});var j={name:"Navbar",components:{SigninDialog:L,LoginDialog:A},data(){return{drawer:!1,logoutBtnShow:!1,loginModal:!1,signinModal:!1}},computed:{...Object(d["b"])({loginUser:"login"}),login(){return!!this.loginUser}},created(){0==this.$store.state.login&&this.$store.dispatch("autoLogin")},methods:{userLogOut(){_(),this.$router.replace("/",()=>{})}}},W=j,R=(e("02bd"),e("40dc")),q=e("5bc1"),G=e("62ad"),H=e("a523"),Y=e("169a"),z=e("132d"),J=e("adda"),K=e("8860"),X=e("56b0"),Q=e("da13"),Z=e("5d23"),tt=e("1baa"),at=e("34c3"),et=e("e449"),st=e("f774"),ot=e("0fd9"),it=Object(V["a"])(W,n,l,!1,null,"e32afd4e",null),nt=it.exports;P()(it,{VAppBar:R["a"],VAppBarNavIcon:q["a"],VBtn:E["a"],VCol:G["a"],VContainer:H["a"],VDialog:Y["a"],VIcon:z["a"],VImg:J["a"],VList:K["a"],VListGroup:X["a"],VListItem:Q["a"],VListItemContent:Z["a"],VListItemGroup:tt["a"],VListItemIcon:at["a"],VListItemTitle:Z["b"],VMenu:et["a"],VNavigationDrawer:st["a"],VRow:ot["a"]});var lt={name:"App",components:{Navbar:nt}},rt=lt,ct=e("7496"),dt=e("f6c4"),mt=Object(V["a"])(rt,o,i,!1,null,null,null),ut=mt.exports;P()(mt,{VApp:ct["a"],VMain:dt["a"]});var vt=e("8c4f"),pt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._v("ページが見つかりませんでした。")])},ht=[],gt={},bt=Object(V["a"])(gt,pt,ht,!1,null,null,null),kt=bt.exports,ft=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"home"}},[e("v-container",[e("v-text-field",{staticStyle:{"max-width":"1500px"},attrs:{color:"#1E90FF","append-icon":"mdi-magnify",flat:"","hide-details":"","solo-inverted":""},on:{keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.search(t.keyword)}},model:{value:t.keyword,callback:function(a){t.keyword=a},expression:"keyword"}}),e("div",{staticClass:"tab-menu"},[e("v-tabs",{attrs:{color:"#000080"},on:{change:t.tabChange},model:{value:t.tabs,callback:function(a){t.tabs=a},expression:"tabs"}},[e("v-tab",[e("span",{staticClass:"tab-menu-item"},[t._v(" 新着順 ")])]),e("v-tab",[e("span",{staticClass:"tab-menu-item"},[t._v(" 人気順 ")])]),e("v-tab",[e("span",{staticClass:"tab-menu-item"},[t._v(" 写真 ")])]),e("v-tab",[e("span",{staticClass:"tab-menu-item"},[t._v(" イラスト ")])])],1),e("v-container",{attrs:{fluid:""}},[e("v-tabs-items",{model:{value:t.tabs,callback:function(a){t.tabs=a},expression:"tabs"}},[e("v-tab-item",[e("v-row",t._l(t.newPosts,(function(a,s){return e("v-col",{key:s,staticClass:"animate__animated animate__fadeIn",attrs:{cols:"6",sm:"3"}},[e("v-card",{staticClass:"image-list-card"},[e("router-link",{staticClass:"image-list-link-img",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[e("v-img",{staticClass:"white--text align-end img",attrs:{src:a.imgUrl}},[e("v-card-title",{staticClass:"image-list-title",domProps:{textContent:t._s(a.title)}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"}},[e("router-link",{staticClass:"image-list-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[t._v(" more ")])],1)],1)],1)],1)})),1)],1),e("v-tab-item",[e("v-row",t._l(t.popularPosts,(function(a,s){return e("v-col",{key:s,staticClass:"animate__animated animate__fadeIn",attrs:{cols:"6",sm:"3"}},[e("v-card",{staticClass:"image-list-card"},[e("router-link",{staticClass:"image-list-link-img",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[e("v-img",{staticClass:"white--text align-end img",attrs:{src:a.imgUrl}},[e("v-card-title",{staticClass:"image-list-title",domProps:{textContent:t._s(a.title)}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"}},[e("router-link",{staticClass:"image-list-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[t._v(" more ")])],1)],1)],1)],1)})),1)],1),e("v-tab-item",[e("v-row",t._l(t.photoPosts,(function(a,s){return e("v-col",{key:s,staticClass:"animate__animated animate__fadeIn",attrs:{cols:"6",sm:"3"}},[e("v-card",{staticClass:"image-list-card"},[e("router-link",{staticClass:"image-list-link-img",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[e("v-img",{staticClass:"white--text align-end img",attrs:{src:a.imgUrl}},[e("v-card-title",{staticClass:"image-list-title",domProps:{textContent:t._s(a.title)}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"}},[e("router-link",{staticClass:"image-list-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[t._v(" more ")])],1)],1)],1)],1)})),1)],1),e("v-tab-item",[e("v-row",t._l(t.illustPosts,(function(a,s){return e("v-col",{key:s,staticClass:"animate__animated animate__fadeIn",attrs:{cols:"6",sm:"3"}},[e("v-card",{staticClass:"image-list-card"},[e("router-link",{staticClass:"image-list-link-img",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[e("v-img",{staticClass:"white--text align-end img",attrs:{src:a.imgUrl}},[e("v-card-title",{staticClass:"image-list-title",domProps:{textContent:t._s(a.title)}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"}},[e("router-link",{staticClass:"image-list-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[t._v(" more ")])],1)],1)],1)],1)})),1)],1)],1)],1)],1),e("v-btn",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"},{name:"show",rawName:"v-show",value:t.topBtn,expression:"topBtn"}],staticClass:"top-btn",attrs:{fab:"",dark:"",fixed:"",bottom:"",right:"",color:"#1E90FF"},on:{click:t.toTop}},[e("v-icon",[t._v("mdi-apple-keyboard-control")])],1)],1)],1)},Ct=[],wt={name:"Home",data(){return{keyword:"",tabs:0,newPosts:[],popularPosts:[],photoPosts:[],illustPosts:[],topBtn:!1}},mounted(){const t=g.collection("posts");t.orderBy("date","desc").get().then(t=>{t.forEach(t=>{this.newPosts.push(t.data())})})},methods:{tabChange(t){if(1===t){const t=g.collection("posts");this.popularPosts=[],t.orderBy("likeCount","desc").get().then(t=>{t.forEach(t=>{this.popularPosts.push(t.data())})})}else if(2===t){const t=g.collection("posts");this.photoPosts=[],t.where("category","==","写真").get().then(t=>{t.forEach(t=>{this.photoPosts.push(t.data())})})}else if(3===t){const t=g.collection("posts");this.illustPosts=[],t.where("category","==","イラスト").get().then(t=>{t.forEach(t=>{this.illustPosts.push(t.data())})})}else{const t=g.collection("posts");this.newPosts=[],t.orderBy("date","desc").get().then(t=>{t.forEach(t=>{this.newPosts.push(t.data())})})}},search(t){this.tabs=0,this.newPosts=[],g.collection("posts").orderBy("title").startAt(t).endAt(t+"").get().then(t=>{t.forEach(t=>{this.newPosts.push(t.data())})})},toTop(){this.$vuetify.goTo(0)},onScroll(t){if("undefined"===typeof window)return;const a=window.pageYOffset||t.target.scrollTop||0;this.topBtn=a>500}}},_t=wt,xt=(e("b447"),e("2fa4")),yt=e("71a3"),Vt=e("c671"),It=e("fe57"),Pt=e("aac8"),Et=e("269a"),Mt=e.n(Et),Dt=e("f977"),St=Object(V["a"])(_t,ft,Ct,!1,null,"08152d1c",null),Ft=St.exports;P()(St,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardTitle:D["c"],VCol:G["a"],VContainer:H["a"],VIcon:z["a"],VImg:J["a"],VRow:ot["a"],VSpacer:xt["a"],VTab:yt["a"],VTabItem:Vt["a"],VTabs:It["a"],VTabsItems:Pt["a"],VTextField:F["a"]}),Mt()(St,{Scroll:Dt["b"]});var Ut=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"post"}},[e("v-container",[e("PostUploader")],1)],1)},Lt=[],$t=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"post-uploader"}},[e("v-row",[e("v-col",{staticClass:"upload-file-area",attrs:{cols:"12",sm:"6"}},[e("v-card",[e("v-img",{directives:[{name:"show",rawName:"v-show",value:t.uploadImage,expression:"uploadImage"}],attrs:{src:t.uploadImage,alt:""}})],1),e("div",[e("label",{directives:[{name:"show",rawName:"v-show",value:!t.uploadImage,expression:"!uploadImage"}],staticClass:"file-upload-btn"},[t._v(" ファイル選択 "),e("input",{staticClass:"input",attrs:{type:"file"},on:{change:t.onFileChange}})]),e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadImage,expression:"uploadImage"}],staticClass:"remove-area",attrs:{depressed:""}},[e("v-btn",{attrs:{color:"red"},on:{click:t.remove}},[e("span",{staticClass:"remove-btn"},[t._v(" 取消 ")])])],1)])])],1),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),e("v-col",{staticClass:"post-form",attrs:{cols:"12",sm:"6"}},[e("v-textarea",{attrs:{label:"投稿者コメント","auto-grow":"",outlined:"",rows:"1","row-height":"15"},model:{value:t.postComment,callback:function(a){t.postComment=a},expression:"postComment"}}),e("v-text-field",{attrs:{label:"タイトル"},model:{value:t.title,callback:function(a){t.title=a},expression:"title"}}),e("v-select",{staticClass:"select",attrs:{items:t.items,label:"カテゴリー"},model:{value:t.category,callback:function(a){t.category=a},expression:"category"}}),e("br"),e("v-btn",{staticClass:"submit-btn",attrs:{depressed:"",color:"#1E90FF"},on:{click:t.addImgFirebase}},[e("span",{staticClass:"submit-btn-text"},[t._v("投稿")])])],1)],1)],1)},Tt=[],Nt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-overlay",[e("div",{staticClass:"fullview"},[e("div",{staticClass:"loading-spacer"}),e("vue-loading",{attrs:{type:"spin",color:"#aaa",size:{width:"50px",height:"50px"}}})],1)])],1)},Ot=[],Bt=e("d523"),At={name:"loading",components:{VueLoading:Bt["VueLoading"]}},jt=At,Wt=(e("d6b4"),e("a797")),Rt=Object(V["a"])(jt,Nt,Ot,!1,null,"a2df2512",null),qt=Rt.exports;P()(Rt,{VOverlay:Wt["a"]});var Gt={name:"PostUpload",data(){return{loading:!1,fileName:"",imgDataUrl:"",uploadImage:"",category:"null",items:["写真","イラスト"],title:"",postComment:""}},components:{Loading:qt},methods:{onFileChange(t){const a=t.target.files||t.dataTransfer.files;this.createImage(a[0]),this.fileName=a[0].name},createImage(t){const a=new FileReader;a.onload=t=>{this.uploadImage=t.target.result},a.readAsDataURL(t),a.onloadend=t=>{this.imgDataUrl=t.target.result}},remove(){this.uploadImage=!1},addImgFirebase(){this.loading=!0;const t=this.$store.state.userUid.uid,a=this.fileName,e=this.imgDataUrl,s={date:new Date,title:this.title,comment:this.postComment,category:this.category,imgUrl:"",fileName:this.fileName,docId:"",likeCount:0,bookMark:0},o=k.child(`${t}/${a}`);o.putString(e,"data_url").then(()=>{o.getDownloadURL().then(a=>{s.imgUrl=a,g.collection("posts").add(s).then(a=>{g.collection("posts").doc(a.id).update({docId:a.id});const e=g.collection("users").doc(t).collection("posts").doc(a.id);e.set({date:new Date,imgUrl:s.imgUrl,title:s.title,docId:a.id}).then(()=>{this.loading=!1,alert("投稿を完了しました。"),location.reload()})}).catch((function(t){console.log(t)}))})})}}},Ht=Gt,Yt=(e("cc37"),e("b974")),zt=e("a844"),Jt=Object(V["a"])(Ht,$t,Tt,!1,null,"657a1d0a",null),Kt=Jt.exports;P()(Jt,{VBtn:E["a"],VCard:M["a"],VCol:G["a"],VImg:J["a"],VRow:ot["a"],VSelect:Yt["a"],VTextField:F["a"],VTextarea:zt["a"]});var Xt={name:"Post",components:{PostUploader:Kt}},Qt=Xt,Zt=(e("e369"),Object(V["a"])(Qt,Ut,Lt,!1,null,"252eebf2",null)),ta=Zt.exports;P()(Zt,{VContainer:H["a"]});var aa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"mypage"}},[e("v-row",[e("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12",sm:"6"}},[e("MypageIcon")],1),e("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12",sm:"6"}},[e("Mypagelist")],1)],1),e("MypageTabs",{staticStyle:{"margin-top":"50px"}})],1)},ea=[],sa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"mypage-icon"}},[e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),e("div",{staticClass:"myphoto"},[e("ul",[e("v-img",{directives:[{name:"show",rawName:"v-show",value:t.uploadMyphoto,expression:"uploadMyphoto"}],staticClass:"myphoto-img",attrs:{src:t.uploadMyphoto,alt:""}})],1)]),e("div",{staticClass:"myphoto"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.uploadMyphoto,expression:"!uploadMyphoto"}]},[e("v-icon",{directives:[{name:"show",rawName:"v-show",value:!t.is_myphoto,expression:"!is_myphoto"}],staticClass:"account-icon"},[t._v("mdi-account")]),e("v-img",{directives:[{name:"show",rawName:"v-show",value:t.is_myphoto,expression:"is_myphoto"}],staticClass:"myphoto-img",attrs:{src:t.user.myphoto}}),e("br"),e("label",{staticClass:"img-btn"},[t._v(" 画像を変更 "),e("input",{staticClass:"input",attrs:{type:"file"},on:{change:t.onFileChange}})])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadMyphoto,expression:"uploadMyphoto"}],staticClass:"myphoto-btn-area",attrs:{depressed:""}},[e("v-btn",{staticClass:"myphoto-btn",attrs:{color:"red"},on:{click:t.remove}},[e("span",[t._v(" 取消 ")])]),e("v-btn",{staticClass:"myphoto-btn",attrs:{color:"#1E90FF"},on:{click:t.changeMyphoto}},[e("span",[t._v("変更")])])],1)])],1)},oa=[],ia={components:{Loading:qt},data(){return{user:this.$store.state.user,loading:!1,myphoto:!0,fileName:"",imgDataUrl:"",uploadMyphoto:""}},computed:{...Object(d["b"])({userInformation:"user"}),is_myphoto(){return void 0!=this.userInformation.myphoto}},methods:{onFileChange(t){const a=t.target.files||t.dataTransfer.files;this.createImage(a[0]),this.fileName=a[0].name},createImage(t){const a=new FileReader;a.onload=t=>{this.uploadMyphoto=t.target.result},a.readAsDataURL(t),a.onloadend=t=>{this.imgDataUrl=t.target.result}},remove(){this.uploadMyphoto=!1},changeMyphoto(){this.loading=!0;const t=this.$store.state.userUid.uid,a=this.imgDataUrl,e=this.fileName,s=k.child(`myphoto/${t}/${e}`);s.putString(a,"data_url").then(()=>{s.getDownloadURL().then(a=>{g.collection("users").doc(t).set({myphoto:a},{merge:!0}).then(()=>{this.loading=!1,alert("変更が完了しました。")}).then(()=>{location.reload()})})})}}},na=ia,la=(e("d95b"),Object(V["a"])(na,sa,oa,!1,null,"788f9b79",null)),ra=la.exports;P()(la,{VBtn:E["a"],VIcon:z["a"],VImg:J["a"]});var ca=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"mypage-list"}},[e("div",{staticClass:"mypage-list"},[e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),e("ul",{staticClass:"user-list-name"},[e("li",{staticClass:"user-list-name-text"},[t._v(" Name："+t._s(this.$store.state.user.name)+" ")]),e("hr"),e("li",[e("v-text-field",{staticClass:"name-input",attrs:{placeholder:"変更したい名前を入力",label:"Name",required:""},model:{value:t.userName,callback:function(a){t.userName=a},expression:"userName"}},[t._v(" Name ")])],1)]),e("div",{staticClass:"name-submit"},[e("v-btn",{staticClass:"submit-btn",attrs:{color:"#1E90FF"},on:{click:t.userNameChangePush}},[e("span",[t._v(" 名前を変更 ")])])],1),e("ul",{staticClass:"user-list-email"},[e("li",{staticClass:"user-list-email-text"},[t._v(" Email："+t._s(this.$store.state.user.email)+" ")]),e("hr")]),e("div",{staticClass:"email-password-btn-area"},[e("ul",[e("li",[e("v-btn",{attrs:{color:"#1E90FF"},on:{click:function(a){t.emailDialog=!0}}},[e("span",[t._v(" Emailを変更 ")])])],1),e("li",[e("v-btn",{attrs:{color:"#1E90FF"},on:{click:function(a){t.passWordVerificationDialog=!0}}},[e("span",[t._v(" パスワードを変更 ")])])],1)])])],1),e("br"),e("v-dialog",{attrs:{"max-width":"300"},model:{value:t.passWordVerificationDialog,callback:function(a){t.passWordVerificationDialog=a},expression:"passWordVerificationDialog"}},[e("v-card",[e("v-card-title",[t._v("パスワード変更")]),e("v-card-text",[t._v(" パスワード変更のため、設定中のEmailアドレスに変更手続きメールを送りますが、よろしいですか？ ")]),e("v-divider"),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"},on:{click:function(a){t.passWordVerificationDialog=!t.passWordVerificationDialog}}},[e("span",{staticClass:"dialog-btn"},[t._v("閉じる")])]),e("v-btn",{attrs:{small:"",color:"red"},on:{click:function(a){return t.changePass(t.user.email)}}},[e("span",{staticClass:"dialog-btn"},[t._v("はい")])])],1)],1)],1),e("v-dialog",{attrs:{"max-width":"300"},on:{keydown:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.passWordDialog=!1}},model:{value:t.passWordDialog,callback:function(a){t.passWordDialog=a},expression:"passWordDialog"}},[e("passwordChangeDialog",{on:{passwordClose:function(a){t.passWordDialog=!1}}})],1),e("v-dialog",{attrs:{"max-width":"600"},model:{value:t.emailDialog,callback:function(a){t.emailDialog=a},expression:"emailDialog"}},[e("MailChangeDialog",{on:{mailClose:function(a){t.emailDialog=!1}}})],1)],1)},da=[],ma=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",[e("v-card-title",[t._v("パスワード変更")]),e("v-card-text",[t._v(" 変更手続きメールを送信しました。メールを確認して下さい。 ")]),e("v-divider"),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"},on:{click:t.passClose}},[e("span",{staticClass:"dialog-btn"},[t._v("閉じる")])])],1)],1)},ua=[],va={methods:{passClose(){this.$emit("passwordClose")}}},pa=va,ha=(e("1aa8"),Object(V["a"])(pa,ma,ua,!1,null,null,null)),ga=ha.exports;P()(ha,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VDivider:S["a"],VSpacer:xt["a"]});var ba=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",[e("v-card-title",[t._v("Eメール変更")]),e("v-card-text",[e("v-text-field",{staticClass:"email-dialog-input",attrs:{placeholder:"変更したいEmailアドレスを入力して下さい",label:"Email",required:""},model:{value:t.userEmail,callback:function(a){t.userEmail=a},expression:"userEmail"}},[t._v(" Email ")]),e("v-text-field",{staticClass:"email-dialog-input",attrs:{placeholder:"設定中のパスワードを入力して下さい",label:"PassWord",required:""},model:{value:t.userPassword,callback:function(a){t.userPassword=a},expression:"userPassword"}},[t._v(" PassWord ")])],1),e("v-divider"),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"},on:{click:t.emailClose}},[e("span",{staticClass:"dialog-btn"},[t._v("閉じる")])]),e("v-btn",{attrs:{small:"",color:"red"},on:{click:function(a){return t.changeEmail(t.$store.state.user.email,t.userPassword,t.userEmail)}}},[e("span",{staticClass:"dialog-btn"},[t._v("送信")])])],1)],1)},ka=[],fa={data(){return{userEmail:"",userPassword:""}},methods:{changeEmail(t,a,e){const s=b.currentUser,o=h.auth.EmailAuthProvider.credential(t,a);s.reauthenticateWithCredential(o).then(()=>{s.updateEmail(e).then(()=>{g.collection("users").doc(this.$store.state.userUid.uid).update({email:e}).then(()=>{alert("Emailを変更しました。再ログインしてください。"),this.$emit("mailClose")}).then(()=>{_(),this.$router.replace("/",()=>{})})}).catch(t=>{alert(t)})})},emailClose(){this.$emit("mailClose")}}},Ca=fa,wa=(e("b476"),Object(V["a"])(Ca,ba,ka,!1,null,"db87778a",null)),_a=wa.exports;P()(wa,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VDivider:S["a"],VSpacer:xt["a"],VTextField:F["a"]});const xa=(t,a)=>{const e=g.collection("users").doc(a);e.collection("bookMark").doc(t).delete(),e.collection("posts").doc(t).delete().then(()=>{const a=g.collection("posts").doc(t);a.collection("bookMark").get().then(t=>{t.forEach(t=>{a.collection("bookMark").doc(t.id).delete()})}),a.collection("like").get().then(t=>{t.forEach(t=>{a.collection("like").doc(t.id).delete()})}),a.collection("comment").get().then(t=>{t.forEach(t=>{a.collection("comment").doc(t.id).delete()})})}).then(()=>{g.collection("posts").doc(t).delete().then(()=>{alert("削除しました。")}).then(()=>{location.reload()})})},ya=(t,a)=>{t?g.collection("users").doc(a).update({name:t}).then(()=>{alert("名前を変更しました。"),location.reload()}):alert("名前を入力して下さい")};var Va={components:{passwordChangeDialog:ga,MailChangeDialog:_a,Loading:qt},data(){return{loading:!1,userName:"",user:this.$store.state.user,passWordVerificationDialog:!1,passWordDialog:!1,emailDialog:!1}},methods:{userNameChangePush(){const t=this.userName,a=this.$store.state.userUid.uid;ya(t,a)},changePass(t){this.passWordVerificationDialog=!1,b.sendPasswordResetEmail(t).then(()=>{console.log("送信しました"),this.passWordDialog=!0})}}},Ia=Va,Pa=(e("664b"),Object(V["a"])(Ia,ca,da,!1,null,"0da14cac",null)),Ea=Pa.exports;P()(Pa,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VDialog:Y["a"],VDivider:S["a"],VSpacer:xt["a"],VTextField:F["a"]});var Ma=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"Mypage-tabs"}},[e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),e("div",{staticClass:"mypage-tabs"},[e("v-tabs",{attrs:{color:"#000080"},model:{value:t.tabs,callback:function(a){t.tabs=a},expression:"tabs"}},[e("v-tab",{staticClass:"mypage-tabs-item"},[t._v("投稿リスト")]),e("v-tab",{staticClass:"mypage-tabs-item"},[t._v("ブックマーク")])],1),e("v-container",{attrs:{fluid:""}},[e("v-tabs-items",{model:{value:t.tabs,callback:function(a){t.tabs=a},expression:"tabs"}},[e("v-tab-item",[e("v-row",t._l(t.postImages,(function(a,s){return e("v-col",{key:s,attrs:{cols:"6",lg:"2"}},[e("v-card",{staticClass:"management-list-card animate__animated animate__fadeIn"},[e("router-link",{staticClass:"management-list-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[e("v-img",{staticClass:"white--text align-end img",attrs:{src:a.imgUrl}},[e("v-card-title",{staticClass:"management-list-title",domProps:{textContent:t._s(a.title)}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"red"},on:{click:function(e){return t.deleteImgPush(a.docId)}}},[e("v-icon",{attrs:{color:"#FFF"}},[t._v(" mdi-delete ")])],1),e("v-btn",{attrs:{small:"",color:"#1E90FF"}},[e("router-link",{staticClass:"management-more-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[t._v(" more ")])],1)],1)],1)],1)})),1)],1),e("v-tab-item",[e("v-row",t._l(t.bookMarkImg,(function(a){return e("v-col",{key:a.imgUrl,staticClass:"animate__animated animate__fadeIn",attrs:{cols:"6",lg:"2"}},[e("v-card",{staticClass:"bookmark-list-card"},[e("router-link",{staticClass:"bookmark-list-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[e("v-img",{staticClass:"white--text align-end img",attrs:{src:a.imgUrl}},[e("v-card-title",{staticClass:"bookmark-list-title",domProps:{textContent:t._s(a.title)}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"#1E90FF"}},[e("router-link",{staticClass:"bookmark-more-link",attrs:{to:{name:"Pickup",params:{post:""+a.docId}}}},[t._v(" more ")])],1)],1)],1)],1)})),1)],1)],1)],1)],1)],1)},Da=[],Sa={name:"MypageTabs",data(){return{loading:!1,tabs:null,postImages:[],bookMarkImg:[]}},components:{Loading:qt},mounted(){const t=this.$store.state.userUid.uid,a=g.collection("users").doc(t).collection("posts");a.get().then(t=>{t.forEach(t=>{this.postImages.push(t.data())})}).catch(t=>{alert(t)}),g.collection("users").doc(t).collection("bookMark").get().then(t=>{t.forEach(t=>{this.bookMarkImg.push(t.data())})}).catch(t=>{alert(t)})},methods:{deleteImgPush(t){const a=confirm("削除してもよろしいですか？");if(1==a){this.loading=!0;const a=this.$store.state.userUid.uid;xa(t,a)}}}},Fa=Sa,Ua=(e("f521"),Object(V["a"])(Fa,Ma,Da,!1,null,"07a98c99",null)),La=Ua.exports;P()(Ua,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardTitle:D["c"],VCol:G["a"],VContainer:H["a"],VIcon:z["a"],VImg:J["a"],VRow:ot["a"],VSpacer:xt["a"],VTab:yt["a"],VTabItem:Vt["a"],VTabs:It["a"],VTabsItems:Pt["a"]});var $a={name:"Mypage",components:{MypageTabs:La,MypageIcon:ra,Mypagelist:Ea}},Ta=$a,Na=(e("fcb1"),Object(V["a"])(Ta,aa,ea,!1,null,"2c3caa8e",null)),Oa=Na.exports;P()(Na,{VCol:G["a"],VRow:ot["a"]});var Ba=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"pickup"}},[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",md:"6"}},[e("h2",[t._v(t._s(t.imgData.title))]),e("ul",{staticClass:"like-book-area"},[t.is_like?e("li",[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.likeShow,expression:"likeShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"dark"},on:{click:t.addLikePush}},[e("v-icon",[t._v("mdi-thumb-up")])],1),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.likeShow,expression:"!likeShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"pink"},on:{click:t.deleteLikePush}},[e("v-icon",[t._v("mdi-thumb-up")])],1),t._v(" "+t._s(t.imgData.likeCount)+" ")],1):e("li",[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.likeShow,expression:"!likeShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"dark"},on:{click:t.addLikePush}},[e("v-icon",[t._v("mdi-thumb-up")])],1),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.likeShow,expression:"likeShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"pink"},on:{click:t.deleteLikePush}},[e("v-icon",[t._v("mdi-thumb-up")])],1),t._v(" "+t._s(t.imgData.likeCount)+" ")],1),t.is_book_mark?e("li",{staticClass:"book-mark-btn"},[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.bookMarkShow,expression:"bookMarkShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"dark"},on:{click:t.addBookMarkPush}},[e("v-icon",[t._v("mdi-star")])],1),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.bookMarkShow,expression:"!bookMarkShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"pink"},on:{click:t.deleteBookMarkPush}},[e("v-icon",[t._v("mdi-star")])],1),t._v(" "+t._s(t.imgData.bookMark)+" ")],1):e("li",{staticClass:"book-mark-btn"},[e("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.bookMarkShow,expression:"!bookMarkShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"dark"},on:{click:t.addBookMarkPush}},[e("v-icon",[t._v("mdi-star")])],1),e("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.bookMarkShow,expression:"bookMarkShow"}],staticClass:"ma-2",attrs:{text:"",icon:"",color:"pink"},on:{click:t.deleteBookMarkPush}},[e("v-icon",[t._v("mdi-star")])],1),t._v(" "+t._s(t.imgData.bookMark)+" ")],1)]),e("v-card",[e("v-img",{staticClass:"pickup-img",attrs:{src:t.imgData.imgUrl,alt:"img"}})],1)],1),e("v-col",{staticClass:"comment-list",attrs:{cols:"12",md:"6"}},[e("h4",[t._v("投稿者コメント")]),e("div",{staticClass:"post-comment"},[e("p",[t._v(t._s(t.imgData.comment))])]),e("div",{staticClass:"comment-header"},[e("h3",{staticClass:"comment-logo"},[t._v("コメント")]),e("div",{staticClass:"comment-btn"},[e("v-btn",{attrs:{color:"#1E90FF",fab:"",dark:"",small:""}},[e("v-icon",{staticClass:"comment-btn-icon",on:{click:function(a){t.commentDialog=!t.commentDialog}}},[t._v("mdi-plus")])],1)],1)]),e("div",{staticClass:"comment-area"},t._l(t.postComments,(function(a,s){return e("div",{key:s},[e("v-card",{staticClass:"mx-auto card",attrs:{"max-width":"400"}},[e("v-card-text",{staticClass:"v-card-text"},[e("v-row",{staticClass:"comment-balloon"},[e("v-col",{staticClass:"balloon-img",attrs:{cols:"3"}},[e("v-img",{staticClass:"balloon-img",attrs:{src:a.myphoto}})],1),e("v-col",{staticClass:"balloon-text-area",attrs:{cols:"9"}},[e("p",{staticClass:"balloon-name"},[t._v(t._s(a.name))]),e("hr"),e("div",{staticClass:"balloon-text"},[t._v(t._s(a.commentText))])])],1)],1)],1)],1)})),0)])],1),e("v-dialog",{attrs:{"max-width":"500"},model:{value:t.commentDialog,callback:function(a){t.commentDialog=a},expression:"commentDialog"}},[e("v-card",[e("v-card-title",[t._v("コメントを入力して下さい。")]),e("v-card-text",[e("v-textarea",{attrs:{label:"コメント入力"},model:{value:t.commentText,callback:function(a){t.commentText=a},expression:"commentText"}}),e("v-divider"),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{small:"",color:"red"},on:{click:function(a){t.commentDialog=!t.commentDialog}}},[e("span",{staticClass:"comment-dialog-btn-text"},[t._v("閉じる")])]),e("v-btn",{attrs:{color:"#1E90FF",small:""},on:{click:t.addComment}},[e("span",{staticClass:"comment-dialog-btn-text"},[t._v("送信")])])],1)],1)],1)],1)],1)],1)},Aa=[];const ja=(t,a)=>{const e=g.collection("posts").doc(t);e.update({likeCount:h.firestore.FieldValue.increment(1)}),e.collection("like").doc(a).set({uid:a,time:new Date})},Wa=(t,a)=>{const e=g.collection("posts").doc(t);e.update({likeCount:h.firestore.FieldValue.increment(-1)}),e.collection("like").doc(a).delete()},Ra=(t,a,e,s)=>{const o=g.collection("posts").doc(t);o.update({bookMark:h.firestore.FieldValue.increment(1)}),o.collection("bookMark").doc(a).set({uid:a,date:new Date}),g.collection("users").doc(a).collection("bookMark").doc(t).set({title:s,imgUrl:e,docId:t,uid:a})},qa=(t,a)=>{const e=g.collection("posts").doc(t);e.update({bookMark:h.firestore.FieldValue.increment(-1)}),e.collection("bookMark").doc(a).delete(),g.collection("users").doc(a).collection("bookMark").doc(t).delete()};var Ga={data(){return{imgData:{},postId:this.$route.params.post,bookMarkShow:!1,postBookMarkList:[],likeShow:!1,postLikeList:[],commentDialog:!1,postComments:[],commentText:""}},computed:{...Object(d["b"])({userId:"userUid",loginUser:"login",userInformation:"user"}),is_like(){return!!this.loginUser&&!!this.postLikeList.includes(this.userId.uid)},is_book_mark(){return!!this.loginUser&&!!this.postBookMarkList.includes(this.userId.uid)}},mounted(){const t=g.collection("posts").doc(this.postId);t.get().then(t=>{this.imgData=t.data()}),t.collection("like").get().then(t=>{t.forEach(t=>{this.postLikeList.push(t.id)})}),t.collection("bookMark").get().then(t=>{t.forEach(t=>{this.postBookMarkList.push(t.id)})}),t.collection("comment").orderBy("date","desc").onSnapshot(t=>{this.postComments=[],t.forEach(t=>{this.postComments.push(t.data())})})},methods:{addBookMarkPush(){const t=this.$store.state.userUid.uid;this.imgData.bookMark++,this.bookMarkShow=!this.bookMarkShow,Ra(this.postId,t,this.imgData.imgUrl,this.imgData.title),alert("ブックマークに登録されました。")},deleteBookMarkPush(){const t=this.$store.state.userUid.uid;this.imgData.bookMark--,this.bookMarkShow=!this.bookMarkShow,qa(this.postId,t),alert("ブックマークが解除されました。")},addLikePush(){const t=this.$store.state.userUid.uid;this.imgData.likeCount++,this.likeShow=!this.likeShow,ja(this.postId,t),alert("いいね！登録されました。")},deleteLikePush(){const t=this.$store.state.userUid.uid;this.imgData.likeCount--,this.likeShow=!this.likeShow,Wa(this.postId,t),alert("いいね！解除されました")},addComment(){void 0==this.$store.state.user.myphoto?g.collection("posts").doc(this.postId).collection("comment").add({myphoto:"https://firebasestorage.googleapis.com/v0/b/original-image-273c8.appspot.com/o/images%2Faccount.png?alt=media&token=84fcacb2-26ca-4d2d-b430-7502d923718e",uid:this.$store.state.userUid.uid,name:this.$store.state.user.name,date:new Date,commentText:this.commentText}).then(()=>{this.commentText="",this.commentDialog=!1}):g.collection("posts").doc(this.postId).collection("comment").add({myphoto:this.$store.state.user.myphoto,uid:this.$store.state.userUid.uid,name:this.$store.state.user.name,date:new Date,commentText:this.commentText}).then(()=>{this.commentText="",this.commentDialog=!1})}}},Ha=Ga,Ya=(e("6a53"),Object(V["a"])(Ha,Ba,Aa,!1,null,"17b22bfe",null)),za=Ya.exports;P()(Ya,{VBtn:E["a"],VCard:M["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VCol:G["a"],VContainer:H["a"],VDialog:Y["a"],VDivider:S["a"],VIcon:z["a"],VImg:J["a"],VRow:ot["a"],VSpacer:xt["a"],VTextarea:zt["a"]}),s["default"].use(vt["a"]);const Ja=[{path:"/",name:"Home",component:Ft},{path:"/post",name:"Post",component:ta,meta:{requiresAuth:!0}},{path:"/mypage",name:"Mypage",component:Oa,meta:{requiresAuth:!0}},{path:"/pickup/:post",name:"Pickup",component:za,meta:{requiresAuth:!0}},{path:"*",component:kt}],Ka=new vt["a"]({mode:"history",base:"/",routes:Ja});Ka.beforeEach(async(t,a,e)=>{const s=t.matched.some(t=>t.meta.requiresAuth);s&&!await h.getCurrentUser()?(alert("ログインが確認できません"),e({path:"/",query:{redirect:t.fullPath}})):e()});var Xa=Ka,Qa=e("f309");s["default"].use(Qa["a"]);var Za=new Qa["a"]({}),te=e("77ed"),ae=e.n(te);s["default"].use(ae.a),p.init(),s["default"].config.productionTip=!1,new s["default"]({router:Xa,store:f,vuetify:Za,render:t=>t(ut)}).$mount("#app")},6182:function(t,a,e){},"664b":function(t,a,e){"use strict";e("eb0c")},"6a53":function(t,a,e){"use strict";e("271b")},"803f":function(t,a,e){},"9ab8":function(t,a,e){},b447:function(t,a,e){"use strict";e("5583")},b476:function(t,a,e){"use strict";e("6182")},b640:function(t,a,e){t.exports=e.p+"img/logo.f73affbb.jpg"},cc37:function(t,a,e){"use strict";e("d3bf")},d3bf:function(t,a,e){},d6b4:function(t,a,e){"use strict";e("4761")},d95b:function(t,a,e){"use strict";e("551c")},e369:function(t,a,e){"use strict";e("803f")},eb0c:function(t,a,e){},f521:function(t,a,e){"use strict";e("9ab8")},fcb1:function(t,a,e){"use strict";e("27cb")}});
//# sourceMappingURL=app.731c4d54.js.map